<!DOCTYPE html>
<html>
<head>
  <title>Quick Capture</title>
  <meta charset="UTF-8">
  <style>
    body {
      margin: 0;
    }
    html, body, #editor, .cm-editor {
      height: 100%;
    }
    .cm-editor .cm-content {
      font-size: 16px;
      padding: 10px;
    }
    .cm-heading {
      font-weight: bold;
    }
    .cm-heading1 { font-size: 2em; }
    .cm-heading2 { font-size: 1.75em; }
    .cm-heading3 { font-size: 1.5em; }
    .cm-heading4 { font-size: 1.25em; }
    .cm-heading5 { font-size: 1.1em; }
    .cm-heading6 { font-size: 1em; }
    .cm-emphasis { font-style: italic; }
    .cm-strong { font-weight: bold; }
    .cm-strikethrough { text-decoration: line-through; }
    .cm-url-link {
      text-decoration: underline;
      color: var(--url-color);
    }
  </style>
</head>
<body>
  <div id="editor"></div>

  <script type="module">
    import { EditorState } from '@codemirror/state';
    import { keymap, EditorView, placeholder } from '@codemirror/view';
    import { standardKeymap, history } from '@codemirror/commands';
    import { markdown, markdownLanguage } from '@codemirror/lang-markdown';
    import { oneDarkTheme } from '@codemirror/theme-one-dark';

    import markdownStyleDecorations from './markdownStyleDecorations.js';

    document.addEventListener('DOMContentLoaded', () => {
      // Create editor view
      const view = new EditorView({
        doc: '',
        parent: document.getElementById('editor'),
        extensions: [
          keymap.of([
            ...standardKeymap,
          ]),
          history(),
          oneDarkTheme,
          placeholder('Type your notes here...'),
          markdown({
            base: markdownLanguage,
          }),
          markdownStyleDecorations,
        ],
      });

      // Focus the editor immediately
      view.focus();
    });
  </script>
</body>
</html>